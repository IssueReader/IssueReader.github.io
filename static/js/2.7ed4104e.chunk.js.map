{"version":3,"sources":["routes/Watching/index.js","routes/Watching/index.module.less"],"names":["Watching","props","_this","_classCallCheck","this","_getPrototypeOf","call","subscribe","bind","_assertThisInitialized","unsubscribe","e","record","loading","dispatch","type","payload","owner","repo","_this2","react__WEBPACK_IMPORTED_MODULE_9___default","a","createElement","Fragment","ant_design_pro_lib_PageHeader__WEBPACK_IMPORTED_MODULE_11___default","title","action","antd_lib_button__WEBPACK_IMPORTED_MODULE_7___default","onClick","load","breadcrumbList","className","_index_module_less__WEBPACK_IMPORTED_MODULE_12___default","container","antd_lib_card__WEBPACK_IMPORTED_MODULE_1___default","bordered","antd_lib_table__WEBPACK_IMPORTED_MODULE_3___default","columns","key","render","text","antd_lib_avatar__WEBPACK_IMPORTED_MODULE_5___default","src","avatarUrl","dataIndex","watch","dataSource","list","pagination","rowKey","concat","PureComponent","__webpack_exports__","Object","dva__WEBPACK_IMPORTED_MODULE_10__","state","watching","module","exports","italic","ellipsis","ponter"],"mappings":"4uCASMA,cACJ,SAAAA,EAAYC,GAAO,IAAAC,MAAA,mGAAAC,CAAAC,KAAAJ,KACjBI,MAAAF,MAAAG,EAAAL,GAAAM,KAAAF,KAAMH,oDAKDM,UAAYL,EAAKK,UAAUC,KAAfC,IAAAP,KACjBA,EAAKQ,YAAcR,EAAKQ,YAAYF,KAAjBC,IAAAP,KAPFA,+EASHS,EAAGC,uEACbA,EAAOC,yEAGLT,KAAKH,MAAMa,UAAWC,KAAM,qBAAsBC,SAAWC,MAAOL,EAAOK,MAAOC,KAAMN,EAAOM,wJAErFP,EAAGC,uEACfA,EAAOC,yEAGLT,KAAKH,MAAMa,UAAWC,KAAM,uBAAwBC,SAAWC,MAAOL,EAAOK,MAAOC,KAAMN,EAAOM,qIAGhG,IAAAC,EAAAf,KAEP,OACEgB,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,KACEH,EAAAC,EAAAC,cAACE,EAAAH,GACCI,MAAM,+CACNC,OAAQN,EAAAC,EAAAC,cAAAK,EAAAN,GAAQN,KAAK,UAAUa,QAASxB,KAAKyB,MAArC,gBACRC,iBAAmBL,MAAO,SAE5BL,EAAAC,EAAAC,cAAA,OAAKS,UAAWC,EAAAX,EAAOY,WACrBb,EAAAC,EAAAC,cAAAY,EAAAb,GAAMc,UAAU,GACdf,EAAAC,EAAAC,cAAAc,EAAAf,GACEgB,UACEZ,MAAO,eACPa,IAAK,QACLC,OAAQ,SAACC,EAAM5B,GAAP,OACNQ,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAAmB,EAAApB,GAAQqB,IAAK9B,EAAO+B,YADtB,WAEe/B,EAAOK,UAIxBQ,MAAO,sBACPmB,UAAW,OACXN,IAAK,SAELb,MAAO,qBACPmB,UAAW,aACXN,IAAK,eAELb,MAAO,oBACPmB,UAAW,YACXN,IAAK,cAELb,MAAO,2BACPmB,UAAW,aACXN,IAAK,eAELb,MAAO,eACPa,IAAK,SACLC,OAAQ,SAACC,EAAM5B,GAAP,OACNA,EAAOiC,MACLzB,EAAAC,EAAAC,cAAAK,EAAAN,GAAQR,QAASD,EAAOC,QAASe,QAAS,SAAAjB,GAAA,OAAKQ,EAAKT,YAAYC,EAAGC,KAAnE,gBACAQ,EAAAC,EAAAC,cAAAK,EAAAN,GAAQN,KAAK,UAAUF,QAASD,EAAOC,QAASe,QAAS,SAAAjB,GAAA,OAAKQ,EAAKZ,UAAUI,EAAGC,KAAhF,mBAGNkC,WAAY1C,KAAKH,MAAM8C,KACvBlC,QAAST,KAAKH,MAAMY,QACpBmC,YAAY,EACZC,OAAQ,SAAArC,GAAA,SAAAsC,OAAatC,EAAOK,MAApB,KAAAiC,OAA6BtC,EAAOM,wNAxEnCE,EAAAC,EAAM8B,eAsF7BC,EAAA,QAAeC,OAAAC,EAAA,QAAAD,CAAQ,SAAAE,GAAA,OAErBR,KAAMQ,EAAMC,SAAST,KACrBlC,QAAS0C,EAAMC,SAAS3C,UAH1B,CAIIb,wBClGJyD,EAAAC,SAAkBC,OAAA,sBAAAC,SAAA,wBAAAC,OAAA,sBAAA5B,UAAA","file":"static/js/2.7ed4104e.chunk.js","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'dva';\r\nimport { Table, Button, Card, Avatar } from 'antd';\r\nimport PageHeader from 'ant-design-pro/lib/PageHeader';\r\n// import userServices from '../../services/user';\r\nimport styles from './index.module.less';\r\n\r\n\r\nclass Watching extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    // this.state = {\r\n    //   list: undefined,\r\n    // };\r\n    // this.load = this.load.bind(this);\r\n    this.subscribe = this.subscribe.bind(this);\r\n    this.unsubscribe = this.unsubscribe.bind(this);\r\n  }\r\n  async subscribe(e, record) {\r\n    if (record.loading) {\r\n      return;\r\n    }\r\n    await this.props.dispatch({ type: 'watching/subscribe', payload: { owner: record.owner, repo: record.repo } });\r\n  }\r\n  async unsubscribe(e, record) {\r\n    if (record.loading) {\r\n      return;\r\n    }\r\n    await this.props.dispatch({ type: 'watching/unsubscribe', payload: { owner: record.owner, repo: record.repo } });\r\n    // this.update(record, { loading: false, watch: !result });\r\n  }\r\n  render() {\r\n    // const columns = this.getColumns();\r\n    return (\r\n      <React.Fragment>\r\n        <PageHeader\r\n          title=\"我的 Github 关注列表\"\r\n          action={<Button type=\"primary\" onClick={this.load}>刷新</Button>}\r\n          breadcrumbList={[{ title: null }]}\r\n        />\r\n        <div className={styles.container}>\r\n          <Card bordered={false}>\r\n            <Table\r\n              columns={[{\r\n                title: '博主',\r\n                key: 'owner',\r\n                render: (text, record) => (\r\n                  <span>\r\n                    <Avatar src={record.avatarUrl} />\r\n                    &nbsp;&nbsp;{record.owner}\r\n                  </span>\r\n                ),\r\n              }, {\r\n                title: 'Github 仓库',\r\n                dataIndex: 'repo',\r\n                key: 'repo',\r\n              }, {\r\n                title: '文章数',\r\n                dataIndex: 'issueCount',\r\n                key: 'issueCount',\r\n              }, {\r\n                title: 'star 人数',\r\n                dataIndex: 'starCount',\r\n                key: 'starCount',\r\n              }, {\r\n                title: '订阅人数',\r\n                dataIndex: 'watchCount',\r\n                key: 'watchCount',\r\n              }, {\r\n                title: '操作',\r\n                key: 'action',\r\n                render: (text, record) => (\r\n                  record.watch ?\r\n                    <Button loading={record.loading} onClick={e => this.unsubscribe(e, record)}>退订</Button> :\r\n                    <Button type=\"primary\" loading={record.loading} onClick={e => this.subscribe(e, record)}>订阅</Button>\r\n                ),\r\n              }]}\r\n              dataSource={this.props.list}\r\n              loading={this.props.loading}\r\n              pagination={false}\r\n              rowKey={record => `${record.owner}/${record.repo}`}\r\n            />\r\n          </Card>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nWatching.propTypes = {\r\n  // repos: PropTypes.array,\r\n  dispatch: PropTypes.func,\r\n};\r\n\r\nexport default connect(state => ({\r\n  // repos: state.app.repos,\r\n  list: state.watching.list,\r\n  loading: state.watching.loading,\r\n}))(Watching);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"italic\":\"index_italic__18DEq\",\"ellipsis\":\"index_ellipsis__1aH_m\",\"ponter\":\"index_ponter__1P1Ty\",\"container\":\"index_container__2t_dh\"};"],"sourceRoot":""}