{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","models/watching.js"],"names":["_toConsumableArray","arr","Array","isArray","i","arr2","length","_arrayWithoutHoles","iter","Symbol","iterator","Object","prototype","toString","call","from","_iterableToArray","TypeError","_nonIterableSpread","__webpack_require__","d","__webpack_exports__","namespace","state","list","loading","subscriptions","setup","_ref","dispatch","history","listen","_ref2","pathname","search","type","payload","effects","load","D_github_issue_reader_dva_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default","a","mark","_ref3","_ref4","put","select","_ref5","_ref6","data","_ref7","repos","wrap","_context","prev","next","watching","sent","abrupt","undefined","userServices","getWatching","app","map","it","index","findIndex","item","repo","owner","D_github_issue_reader_dva_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__","watch","stop","this","subscribe","_ref8","_ref9","result","_context2","resolve","unsubscribe","_ref10","_ref11","_context3","update","_ref12","_ref13","_ref14","newList","_context4","D_github_issue_reader_dva_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","reducers","save","action"],"mappings":"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","file":"static/js/14.404660a5.chunk.js","sourcesContent":["import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}","export default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}","export default function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}","// import React from 'react';\r\n// import { routerRedux } from 'dva/router';\r\n// import queryString from 'query-string';\r\n// import { notification } from 'antd';\r\n\r\nimport userServices from '../services/user';\r\n\r\n\r\nexport default {\r\n\r\n  namespace: 'watching',\r\n\r\n  state: {\r\n    list: [],\r\n    loading: false,\r\n  },\r\n\r\n  subscriptions: {\r\n    setup({ dispatch, history }) {\r\n      return history.listen(({ pathname, search }) => {\r\n        if ('/user/watching' === pathname) {\r\n          return dispatch({ type: 'load', payload: { search } });\r\n        }\r\n      });\r\n    },\r\n  },\r\n\r\n  effects: {\r\n    *load({ payload }, { call, put, select }) {  // eslint-disable-line\r\n      const { loading } = yield select(state => state.watching);\r\n      if (loading) {\r\n        return;\r\n      }\r\n      yield put({ type: 'save', payload: { list: undefined, loading: true } });\r\n      const { data } = yield call(userServices.getWatching);\r\n      yield put({ type: 'save', payload: { loading: false } });\r\n      if (!data) {\r\n        return yield put({ type: 'save', payload: { list: null } });\r\n      }\r\n      const { repos } = yield select(state => state.app);\r\n      const list = data.list.map((it) => {\r\n        const index = repos.findIndex((item) => {\r\n          return it.repo === item.repo && it.owner === item.owner;\r\n        });\r\n        return { ...it, watch: -1 !== index };\r\n      });\r\n      return yield put({ type: 'save', payload: { list } });\r\n    },\r\n    // *getOwners({ payload }, { put, call }) {},\r\n    *subscribe({ payload }, { put, call }) {\r\n      if (payload.loading) {\r\n        return;\r\n      }\r\n      yield put.resolve({ type: 'update', payload: { ...payload, loading: true } });\r\n      const result = yield put.resolve({ type: 'app/subscribe', payload });\r\n      yield put.resolve({ type: 'update', payload: { ...payload, loading: false, watch: result } });\r\n    },\r\n    *unsubscribe({ payload }, { put, call }) {\r\n      if (payload.loading) {\r\n        return;\r\n      }\r\n      yield put.resolve({ type: 'update', payload: { ...payload, loading: true } });\r\n      const result = yield put.resolve({ type: 'app/unsubscribe', payload });\r\n      yield put.resolve({ type: 'update', payload: { ...payload, loading: false, watch: !result } });\r\n    },\r\n    *update({ payload }, { put, select }) {\r\n      const { list } = yield select(state => state.watching);\r\n      if (!list) {\r\n        return;\r\n      }\r\n      const index = list.findIndex(it => (payload.owner === it.owner && payload.repo === it.repo));\r\n      if (-1 === index) {\r\n        return;\r\n      }\r\n      const newList = [...list];\r\n      newList[index] = { ...newList[index], ...payload };\r\n      yield put({ type: 'save', payload: { list: newList } });\r\n    },\r\n  },\r\n\r\n  reducers: {\r\n    save(state, action) {\r\n      return { ...state, ...action.payload };\r\n    },\r\n  },\r\n\r\n};\r\n"],"sourceRoot":""}