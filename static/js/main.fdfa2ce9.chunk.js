(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{142:function(e,t,n){"use strict";var r=n(3),a=n.n(r),u=n(11),s=n(225),c=n(48);t.a={getAccessTokenByCode:function(){var e=Object(u.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(s.a)("https://issuereaderapi.leanapp.cn/login",{method:"POST",body:JSON.stringify(t)}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getUserInfo:function(){var e=Object(u.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.a.getUserInfo());case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getWatching:function(){var e=Object(u.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.a.getWatching());case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},151:function(e,t,n){"use strict";n(144);var r=n(19),a=n.n(r),u=n(1),s=n.n(u),c=n(239),o=n.n(c);t.a=function(){return s.a.createElement("div",{className:o.a.loading},s.a.createElement(a.a,{type:"loading"}))}},225:function(e,t,n){"use strict";var r=n(27),a=n(232),u=n.n(a),s=n(3),c=n.n(s),o=n(11),i=n(17),p=n.n(i),l={get:function(){var e=Object(o.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.getItem("sessionToken");case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),set:function(e){return p.a.setItem("sessionToken",e)},remove:function(){return p.a.removeItem("sessionToken")}};function f(e){return e.text()}function d(e){return new Promise(function(t){t(""===e?{}:JSON.parse(e))})}function m(e){if(200<=e.status&&300>e.status)return e;var t=new Error(e.statusText);throw t.response=e,t}function h(e,t){var n=function(e){var t=Object(r.a)({"Content-Type":"application/json"},e),n=l.get();return n?Object(r.a)({},t,{SessionToken:n}):t}(t.headers),a=Object.assign({},{method:"GET",mode:"cors",headers:n},t);return u()(e,a).then(m).then(f).then(d).then(function(e){return{data:e}}).catch(function(e){return{err:e}})}n.d(t,"a",function(){return h})},239:function(e,t,n){e.exports={italic:"index_italic__2xJNB",ellipsis:"index_ellipsis__1TZNe",ponter:"index_ponter__i8VfP",loading:"index_loading__3DqDV"}},24:function(e,t,n){e.exports={italic:"BasicLayout_italic__6g-CS",ellipsis:"BasicLayout_ellipsis__1QAdS",ponter:"BasicLayout_ponter__1nMp7",layout:"BasicLayout_layout__Re7i2",header:"BasicLayout_header__m3HNr",logo:"BasicLayout_logo__1hjtU",navBar:"BasicLayout_navBar__2d6E9",navExtra:"BasicLayout_navExtra__2FGUT",navItem:"BasicLayout_navItem__1dtlA",activedNavItem:"BasicLayout_activedNavItem__3O8dm",username:"BasicLayout_username__wvt6T",content:"BasicLayout_content__3xzDJ",sider:"BasicLayout_sider__303Xa",siderRight:"BasicLayout_siderRight__3rdat",placehoder:"BasicLayout_placehoder__7QGFc",subMenu:"BasicLayout_subMenu__3JBtC"}},263:function(e,t,n){e.exports=n(264)},264:function(e,t,n){"use strict";n.r(t);var r=n(51),a=n.n(r),u=n(139),s=n.n(u),c=n(229),o=n.n(c),i=n(230),p=(n(372),n(374),a()({history:s()()}));p.use(o()()),p.use({onAction:Object(i.createLogger)()}),p.model(n(518).default),p.router(n(511).default),p.start("#root")},304:function(e,t){},35:function(e,t,n){"use strict";var r=n(78),a=n(27),u=n(3),s=n.n(u),c=n(11),o=n(17),i=n.n(o),p=n(48),l=function(){var e=Object(c.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.setItem("repos",[]);case 2:return e.next=4,i.a.setItem("issues",[]);case 4:return e.next=6,i.a.setItem("favorites",[]);case 6:return e.next=8,i.a.setItem("read",[]);case 8:return e.next=10,i.a.setItem("utime",0);case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(c.a)(s.a.mark(function e(t){var n,r,a=arguments;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:[],e.prev=1,e.next=4,i.a.getItem(t);case 4:return r=e.sent,e.abrupt("return",r||n);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",n);case 11:case"end":return e.stop()}},e,this,[[1,8]])}));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(c.a)(s.a.mark(function e(t,n){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.setItem(t,n);case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}},e,this,[[0,5]])}));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(c.a)(s.a.mark(function e(t){var n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("repos");case 2:return n=e.sent,-1===(r=n.findIndex(function(e){return e.owner===t.owner&&e.repo===t.repo}))?n.push(t):n[r]=Object(a.a)({},n[r],t),e.next=7,d("repos",n);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(c.a)(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("issues");case 2:return n=e.sent,t.map(function(e){var t=n.findIndex(function(t){return t.owner===e.owner&&t.repo===e.repo&&t.number===e.number});return-1===t?n.push(e):n[t]=Object(a.a)({},n[t],e),e}),n.sort(function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)}),e.next=7,d("issues",n);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();t.a={checkUser:function(){var e=Object(c.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.getItem("userId");case 3:if(e.sent===t.login){e.next=9;break}return e.next=7,l();case 7:return e.next=9,i.a.setItem("userId",t.login);case 9:return e.abrupt("return",!0);case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",!1);case 15:case"end":return e.stop()}},e,this,[[0,12]])}));return function(t){return e.apply(this,arguments)}}(),getUpdateTime:function(){var e=Object(c.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.getItem("utime");case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),setUpdateTime:function(){var e=Object(c.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=(new Date).getTime(),e.next=4,i.a.setItem("utime",t);case 4:return e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),getRepos:function(){var e=Object(c.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f("repos"));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),syncRepoInfo:function(){var e=Object(c.a)(s.a.mark(function e(t){var n,a,u,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.owner&&t.repo){e.next=2;break}return e.abrupt("return",{data:t});case 2:return e.next=4,p.a.getRepoInfo(t);case 4:if(!(n=e.sent).errMsg){e.next=7;break}return e.abrupt("return",n);case 7:return a=n.data,u=a.list,c=Object(r.a)(a,["list"]),e.next=10,m(c);case 10:return e.next=12,h(u);case 12:return e.abrupt("return",c);case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),addRepo:function(){var e=Object(c.a)(s.a.mark(function e(t){var n,a,u,c,o,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.owner,a=t.repo,e.next=3,p.a.getRepoInfo({owner:n,repo:a});case 3:if(!(u=e.sent).errMsg){e.next=6;break}return e.abrupt("return",u);case 6:return c=u.data,o=c.list,i=Object(r.a)(c,["list"]),e.next=9,m(i);case 9:return e.next=11,h(o);case 11:return e.abrupt("return",u);case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),delRepo:function(){var e=Object(c.a)(s.a.mark(function e(t){var n,r,a,u,c,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.owner,r=t.repo,e.next=3,f("repos");case 3:if(a=e.sent,-1===(u=a.findIndex(function(e){return e.owner===n&&e.repo===r}))){e.next=9;break}return a.splice(u,1),e.next=9,d("repos",a);case 9:return e.next=11,f("issues");case 11:if(c=e.sent,!((o=c.filter(function(e){return e.owner!==n||e.repo!==r||!e.favorite})).length<c.length)){e.next=16;break}return e.next=16,d("issues",o);case 16:return e.abrupt("return",{owner:n,repo:r});case 17:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),updateRepo:function(){var e=Object(c.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t);case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getIssues:function(){var e=Object(c.a)(s.a.mark(function e(){var t,n,r,a,u,c=arguments;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:0,n=c.length>1&&void 0!==c[1]?c[1]:100,e.next=4,f("issues");case 4:return r=e.sent,a=r.length,u=r.slice(t,Math.min(t+n,a)),e.abrupt("return",{data:{list:u,total:a,start:t}});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getRepoInfo:function(){var e=Object(c.a)(s.a.mark(function e(t){var n,r,u,c,o,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.owner,r=t.repo,e.next=3,f("repos");case 3:if(u=e.sent,c=u.find(function(e){return n===e.owner&&r===e.repo})){e.next=7;break}return e.abrupt("return",{errMsg:{response:{status:"404",message:"resp not found"}}});case 7:return e.next=9,f("issues");case 9:return o=e.sent,i=o.filter(function(e){return n===e.owner&&r===e.repo}),e.abrupt("return",{data:Object(a.a)({},c,{list:i})});case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getIssueInfo:function(){var e=Object(c.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.a.getIssueInfo(t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),updateIssue:function(){var e=Object(c.a)(s.a.mark(function e(t){var n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("issues");case 2:if(n=e.sent,-1===(r=n.findIndex(function(e){return e.owner===t.owner&&e.repo===t.repo&&e.number===t.number}))){e.next=8;break}return n[r]=Object(a.a)({},n[r],t),e.next=8,d("issues",n);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getFavoriteIssues:function(){var e=Object(c.a)(s.a.mark(function e(){var t,n,r,a,u,c,o=arguments;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:0,n=o.length>1&&void 0!==o[1]?o[1]:100,e.next=4,f("issues");case 4:return r=e.sent,a=r.filter(function(e){return e&&e.favorite}),u=a.length,c=a.slice(t,Math.min(t+n,u)),e.abrupt("return",{data:{list:c,total:u,start:t}});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},374:function(e,t,n){},48:function(e,t,n){"use strict";var r=n(3),a=n.n(r),u=n(27),s=n(11),c=n(79),o=n(62),i=n.n(o),p=n(233),l=n.n(p),f=n(63),d=function(){var e=Object(s.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",new l.a({uri:"https://api.github.com/graphql",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"".concat(t.token_type," ").concat(t.access_token)}}));case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),m={query:function(){var e=Object(s.a)(a.a.mark(function e(t){var n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",{errMsg:{message:"get graphql client failed!"}});case 5:return e.prev=5,e.next=8,n.query({query:t,errorPolicy:"ignore"});case 8:return r=e.sent,e.abrupt("return",{data:r.data});case 12:return e.prev=12,e.t0=e.catch(5),e.abrupt("return",{errMsg:e.t0});case 15:case"end":return e.stop()}},e,this,[[5,12]])}));return function(t){return e.apply(this,arguments)}}()};function h(){var e=Object(c.a)(['query {\n      repository(owner: "','", name: "','") {\n        issue(number:',"){\n          body\n        }\n      }\n    }"]);return h=function(){return e},e}function v(){var e=Object(c.a)(["query {\n      viewer {\n        watching (first: 100","){\n          totalCount\n          edges{\n            cursor\n            node{\n              owner {\n                login\n                avatarUrl\n              }\n              name\n              issues (states:OPEN){\n                totalCount\n              }\n              stargazers {\n                totalCount\n              }\n              watchers{\n                totalCount\n              }\n            }\n          }\n        }\n      }\n    }"]);return v=function(){return e},e}function b(){var e=Object(c.a)(['query {\n      repository(owner: "','", name: "','") {\n        issues(last : 100, states:OPEN, orderBy:{field:CREATED_AT, direction:DESC}){\n          totalCount\n          edges{\n            node{\n              title\n              number\n              createdAt\n              updatedAt\n              author{\n                login\n              }\n            }\n          }\n        }\n      }\n      user(login: "','"){\n        avatarUrl\n        bio\n        name\n      }\n    }']);return b=function(){return e},e}function x(){var e=Object(c.a)(["query {\n      viewer {\n        login\n        avatarUrl\n        name\n        bio\n      }\n    }"]);return x=function(){return e},e}var y=function(e,t){var n={avatarUrl:"",bio:"",name:t};return e&&e.data?e.data.user?e.data.user:e.data.organization?(e.data.organization.bio="",e.data.organization):n:n};t.a={getUserInfo:function(){return m.query(i()(x()))},getRepoInfo:function(){var e=Object(s.a)(a.a.mark(function e(t){var n,r,s,c,o,p,l,f,d,h,v,x;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.owner,r=t.repo,s=t.team,c=void 0!==s&&s,o=t.filterAuthor,p=void 0===o||o,e.next=3,m.query(i()(b(),n,r,n));case 3:if(!(l=e.sent).errMsg){e.next=6;break}return e.abrupt("return",l);case 6:return f=y(l,n),d=l&&l.data&&l.data.repository&&l.data.repository.issues,h=d&&d.totalCount||0,v=d&&d.edges||[],x={owner:n,repo:r,totalCount:h,list:v.filter(function(e){return!0===c||!1===p||e.node.author&&e.node.author.login===n}).map(function(e){return Object(u.a)({owner:n,repo:r},e.node,{user:f})}),user:f},e.abrupt("return",{data:x});case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getWatching:function(){var e=Object(s.a)(a.a.mark(function e(t){var n,r,u,s,c;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.query(i()(v(),t?', after: "'.concat(t,'"'):""));case 2:if(!(n=e.sent).errMsg){e.next=5;break}return e.abrupt("return",n);case 5:return r=n.data.viewer.watching,u=r.totalCount,s=r.edges,c={totalCount:u,list:s.map(function(e){return{cursor:e.cursor,owner:e.node.owner.login,avatarUrl:e.node.owner.avatarUrl,repo:e.node.name,issueCount:e.node.issues.totalCount,starCount:e.node.stargazers.totalCount,watchCount:e.node.watchers.totalCount}})},e.abrupt("return",{data:c});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getIssueInfo:function(){var e=Object(s.a)(a.a.mark(function e(t){var n,r,u,s,c;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.owner,r=t.repo,u=t.number,e.next=3,m.query(i()(h(),n,r,u));case 3:if(!(s=e.sent).errMsg){e.next=6;break}return e.abrupt("return",s);case 6:return c={owner:n,repo:r,number:u,body:s.data.repository.issue.body},e.abrupt("return",{data:c});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}},49:function(e,t,n){e.exports={italic:"index_italic__3W7_N",ellipsis:"index_ellipsis__TsyIL",ponter:"index_ponter__3RR4f",container:"index_container__2J-r9",card:"index_card__X0dPJ",logo:"index_logo__3_1sN",title:"index_title__STexD",subtitle:"index_subtitle__3UBjH",block:"index_block__31yfx"}},511:function(e,t,n){"use strict";n.r(t);n(405);var r=n(243),a=n.n(r),u=n(1),s=n.n(u),c=n(16),o=n(101),i=n.n(o),p=n(244),l=n.n(p),f=n(151),d=(n(424),n(240)),m=n.n(d),h=n(51),v=n(80),b=n.n(v),x=Object(h.connect)(function(e){return{percent:e.app.percent}})(function(e){var t=e.percent;return s.a.createElement("div",{className:b.a.flex},s.a.createElement("div",{className:b.a.loading},s.a.createElement("div",{className:b.a.text},"loading"),s.a.createElement("div",{className:b.a.percent},t,"%"),s.a.createElement(m.a,{percent:t,showInfo:!1,strokeWidth:1,status:"active"})))}),y=(n(247),n(147)),g=n.n(y),w=(n(145),n(86)),k=n.n(w),_=n(81),E=n(82),I=n(84),j=n(83),O=n(85),R=n(49),C=n.n(R),N=function(){window.location.replace("https://github.com/login/oauth/authorize?client_id=e3fcd5f1d9cfd0d5aaaa&redirect_uri=https%3A%2F%2Fissuereader.github.io%2F&scope=repo&state=github")},T=function(e){function t(){return Object(_.a)(this,t),Object(I.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:C.a.container},s.a.createElement(g.a,{className:C.a.card},s.a.createElement("img",{className:C.a.logo,src:"./logo128x128.png",alt:"Github Iussue Blog Reader"}),s.a.createElement("div",{className:C.a.title},"Iussue Reader"),s.a.createElement("div",{className:C.a.subtitle},"Github Iussue Blog Reader"),s.a.createElement(k.a,{className:C.a.block,onClick:N,type:"primary",icon:"github",size:"large"},"Github \u767b\u5f55")))}}]),t}(s.a.PureComponent),B=n(241),A=n.n(B),U=function(){return s.a.createElement(A.a,{type:"500",title:"",desc:"\u6682\u4e0d\u652f\u6301\uff0c\u8bf7\u4f7f\u7528\u7535\u8111\u8bbf\u95ee",actions:[]})},L=(n(260),n(161)),M=n.n(L),S=(n(245),n(104)),P=n.n(S),q=(n(477),n(20)),D=n.n(q),z=(n(144),n(19)),J=n.n(z),F=(n(483),n(50)),G=n.n(F),K=function(e){return function(e,t){return e.map(function(e){var n=i()({app:t,models:e.models,component:e.component}),r=!1!==e.exact;return s.a.createElement(c.Route,{key:e.path,path:e.path,exact:r,render:function(e){return s.a.createElement(n,Object.assign({},e,{app:t}))}})})}([{path:"/all",key:"all",models:function(){return[n.e(6).then(n.bind(null,925))]},component:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(7)]).then(n.bind(null,926))}},{path:"/favorites",key:"favorites",models:function(){return[n.e(8).then(n.bind(null,927))]},component:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(9)]).then(n.bind(null,928))}},{path:"/discovery",key:"discovery",models:function(){return[]},component:function(){return Promise.all([n.e(0),n.e(1),n.e(10)]).then(n.bind(null,929))}},{path:"/discovery/:owner/:repo",key:"repoinfo",models:function(){return[]},component:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(11)]).then(n.bind(null,935))}},{path:"/repos/:owner/:repo",key:"repo",models:function(){return[]},component:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(12)]).then(n.bind(null,930))}},{path:"/user/profile",key:"profile",models:function(){return[]},component:function(){return Promise.all([n.e(0),n.e(2),n.e(4),n.e(13)]).then(n.bind(null,931))}},{path:"/user/watching",key:"watching",models:function(){return[n.e(14).then(n.bind(null,932))]},component:function(){return Promise.all([n.e(0),n.e(4),n.e(15)]).then(n.bind(null,933))}},{path:"/search",key:"search",models:function(){return[]},component:function(){return n.e(16).then(n.bind(null,934))}}],e)},W=n(24),H=n.n(W),Q=G.a.Header,V=G.a.Content,X=G.a.Sider,Z=function(e){var t=e.pathname,n=e.repos,r=e.onClick;if(t.match(/^\/user\/.*/)){var a=[t];return s.a.createElement(D.a,{defaultSelectedKeys:["/user/profile"],selectedKeys:a,mode:"inline",onClick:r},s.a.createElement(D.a.Item,{key:"/user/profile"},s.a.createElement(J.a,{type:"user"}),s.a.createElement("span",null,"\xa0\u4e2a\u4eba\u4e2d\u5fc3")),s.a.createElement(D.a.Item,{key:"/user/watching"},s.a.createElement(J.a,{type:"github"}),s.a.createElement("span",null,"\xa0\u5173\u6ce8")))}if(t.match(/^\/search(\/.*)?/)){var u=[t];return s.a.createElement(D.a,{defaultSelectedKeys:["/search"],mode:"inline",selectedKeys:u,onClick:r},s.a.createElement(D.a.Item,{key:"/search"},"\u641c\u7d22\u7ed3\u679c"))}var c=[];return t.match(/^\/repos\/.*/)?c.push("/repos",t):t.match(/^\/discovery\/.*/)?c.push("/discovery"):c.push(t),s.a.createElement(D.a,{defaultSelectedKeys:["/all"],selectedKeys:c,mode:"inline",onClick:r},s.a.createElement(D.a.Item,{key:"/all"},"\u6240\u6709"),s.a.createElement(D.a.SubMenu,{key:"/repos",title:"\u6211\u7684\u8ba2\u9605",className:H.a.subMenu},n&&n.map(function(e){return e&&s.a.createElement(D.a.Item,{key:"/repos/".concat(e.owner,"/").concat(e.repo)},e.user&&s.a.createElement(P.a,{size:"small",shape:"square",src:e.user.avatarUrl}),"\xa0",e.owner,"/",e.repo)}),(!n||0===n.length)&&s.a.createElement(D.a.Item,{key:"no-data",disabled:!0},"\u6ca1\u6709\u8ba2\u9605")),s.a.createElement(D.a.Item,{key:"/favorites"},"\u6211\u7684\u6536\u85cf"),s.a.createElement(D.a.Item,{key:"/discovery"},"\u53d1\u73b0"))},$=function(e){function t(){var e,n;Object(_.a)(this,t);for(var r=arguments.length,a=new Array(r),u=0;u<r;u++)a[u]=arguments[u];return(n=Object(I.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(a)))).onUserMenuClick=function(e){var t=e.key;"logout"===t?n.props.dispatch({type:"app/logout"}):n.props.dispatch(c.routerRedux.push(t))},n.onSiderMenuClick=function(e){var t=e.key;n.props.dispatch(c.routerRedux.push(t))},n}return Object(O.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.app,r=t.location,a=t.userInfo,u=t.repos;return s.a.createElement(G.a,{className:H.a.layout},s.a.createElement(Q,{className:H.a.header},s.a.createElement("a",{className:H.a.logo,href:"https://github.com/IssueReader/IssueReader.github.io",target:"_blank",rel:"noopener noreferrer"},s.a.createElement("img",{alt:"IssueReader",src:"/logo128x128.png"})),s.a.createElement("div",{className:H.a.navBar},s.a.createElement(c.Link,{to:"/all"},s.a.createElement(J.a,{type:"home"}),"\xa0\xa0\u9996\u9875")),s.a.createElement("div",{className:H.a.navExtra},s.a.createElement("div",{className:H.a.navItem,onClick:function(){return e.props.dispatch(c.routerRedux.push("/discovery"))}},s.a.createElement(J.a,{type:"plus"}),s.a.createElement("span",null,"\xa0\u6dfb\u52a0")),s.a.createElement("a",{className:H.a.navItem,href:"https://github.com/IssueReader/IssueReader.github.io",target:"_blank",rel:"noopener noreferrer"},s.a.createElement(J.a,{type:"github"}),s.a.createElement("span",null,"\xa0Star on Github")),s.a.createElement(M.a,{overlay:s.a.createElement(D.a,{onClick:this.onUserMenuClick},s.a.createElement(D.a.Item,{key:"/user/profile"},s.a.createElement(J.a,{type:"user"}),s.a.createElement("span",null,"\xa0\u4e2a\u4eba\u4e2d\u5fc3")),s.a.createElement(D.a.Item,{key:"/user/watching"},s.a.createElement(J.a,{type:"github"}),s.a.createElement("span",null,"\xa0\u5173\u6ce8")),s.a.createElement(D.a.Divider,null),s.a.createElement(D.a.Item,{key:"logout"},s.a.createElement(J.a,{type:"logout"}),s.a.createElement("span",null,"\xa0\u6ce8\u9500")))},s.a.createElement("div",{className:H.a.navItem},s.a.createElement(P.a,{size:"small",src:a.avatarUrl}),s.a.createElement("span",{className:H.a.username},"\xa0",a.name))))),s.a.createElement(V,{className:H.a.content},s.a.createElement(G.a,null,s.a.createElement(X,{className:H.a.sider,width:"240"},s.a.createElement(Z,{pathname:r.pathname,repos:u,onClick:this.onSiderMenuClick}),s.a.createElement("div",{className:H.a.placehoder})),s.a.createElement(G.a,{className:H.a.siderRight},s.a.createElement(V,{style:{overflow:"initial"}},s.a.createElement(c.Switch,null,K(n),s.a.createElement(c.Redirect,{push:!0,from:"*",to:"/all"})))))))}}]),t}(s.a.PureComponent),Y=Object(h.connect)(function(e){return{userInfo:e.app.userInfo,repos:e.app.repos}})($);i.a.setDefaultLoadingComponent(function(){return s.a.createElement(f.a,null)});t.default=function(e){var t=e.history,n=e.app;return s.a.createElement(a.a,{locale:l.a},s.a.createElement(c.Router,{history:t},s.a.createElement(c.Switch,null,s.a.createElement(c.Route,{path:"/",exact:!0,component:x}),s.a.createElement(c.Route,{path:"/login",exact:!0,component:T}),s.a.createElement(c.Route,{path:"/mobile",exact:!0,component:U}),s.a.createElement(c.Route,{path:"(.*)",render:function(e){return s.a.createElement(Y,Object.assign({},e,{app:n}))}}))))}},518:function(e,t,n){"use strict";n.r(t);n(254);var r=n(96),a=n.n(r),u=n(78),s=n(27),c=n(3),o=n.n(c),i=n(16),p=n(75),l=n.n(p),f=n(231),d=n.n(f),m=n(17),h=n.n(m),v=n(142),b=n(11),x=n(63),y={getAccessToken:function(){var e=Object(b.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x.a.get());case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),setAccessToken:function(){var e=Object(b.a)(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x.a.set(t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),removeAccessToken:function(){var e=Object(b.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x.a.remove());case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},g=n(35),w=function(e){var t=l.a.stringify(e),n=t?"?".concat(t):"",r=window.location.href.replace(/^([^?#]+)(\?[^#]+)(#.*)?/,"$1".concat(n,"$3"));window.history.replaceState({},"",r)};t.default={namespace:"app",state:{repos:void 0,userInfo:void 0,percent:0,status:"active"},subscriptions:{setup:function(e){var t=e.dispatch,n=e.history;return t({type:"init",payload:n.location}),n.listen(function(e){var n=e.pathname,r=e.search;if("/"===n)return t({type:"loading",payload:{pathname:n,search:r}})})}},effects:{init:o.a.mark(function e(t,n){var r,a,u,s,c,p,f;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,n.call,a=n.put,u=n.select,h.a.config({name:"issue-reader"}),e.next=5,u(function(e){return e.app});case 5:if(s=e.sent,c=s.userInfo,"/"!==r.pathname&&"/login"!==r.pathname&&void 0===c){e.next=9;break}return e.abrupt("return");case 9:return p="mobile"===r.pathname?"/all":r.pathname,f=l.a.stringify(Object.assign({from:p},l.a.parse(r.search))),e.next=13,a(i.routerRedux.replace({pathname:"/",search:"?".concat(f)}));case 13:case"end":return e.stop()}},e,this)}),loading:o.a.mark(function e(t,n){var r,a,u,c,p;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.payload,a=n.put,"mobile"!==new d.a(window.navigator.userAgent).device.type){e.next=9;break}return e.next=6,a({type:"save",payload:{userInfo:null}});case 6:return e.next=8,a(i.routerRedux.replace("/mobile"));case 8:return e.abrupt("return",e.sent);case 9:return u=l.a.parse(window.location.search||""),e.next=12,a.resolve({type:"getAccessToken",payload:u});case 12:if(!(c=e.sent)){e.next=21;break}return e.next=16,a.resolve({type:"getUserInfo",payload:c});case 16:if(!(p=e.sent)){e.next=21;break}return e.next=20,a({type:"loginSucceed",payload:Object(s.a)({userInfo:p},r)});case 20:return e.abrupt("return",e.sent);case 21:return e.next=23,a({type:"loginFaild"});case 23:return e.abrupt("return",e.sent);case 24:case"end":return e.stop()}},e,this)}),getAccessToken:o.a.mark(function e(t,n){var r,a,s,c,i,p,l,f;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.payload,n.put,a=n.call,s=r.code,c=r.state,i=Object(u.a)(r,["code","state"]),!s||!c){e.next=13;break}return w(i),e.next=7,a(v.a.getAccessTokenByCode,{code:s,state:c});case 7:if(p=e.sent,!(l=p.data)){e.next=12;break}return e.next=12,a(y.setAccessToken,l);case 12:return e.abrupt("return",l||null);case 13:return e.next=15,a(y.getAccessToken);case 15:return f=e.sent,e.abrupt("return",f||null);case 17:case"end":return e.stop()}},e,this)}),getUserInfo:o.a.mark(function e(t,n){var r,a,u,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,n.put,a=n.call,e.next=4,a(v.a.getUserInfo,r);case 4:return u=e.sent,s=u.data,e.abrupt("return",s&&s.viewer||null);case 7:case"end":return e.stop()}},e,this)}),logout:o.a.mark(function e(t,n){var r,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.payload,r=n.put,a=n.call,e.next=4,a(y.removeAccessToken);case 4:return e.next=6,r({type:"save",payload:{userInfo:null}});case 6:return e.next=8,r(i.routerRedux.replace("/login"));case 8:case"end":return e.stop()}},e,this)}),loginSucceed:o.a.mark(function e(t,n){var r,a,u;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,a=n.put,n.call,e.next=4,a({type:"save",payload:{userInfo:r.userInfo}});case 4:return e.next=6,a.resolve({type:"updateDB",payload:r.userInfo});case 6:if(!((u=e.sent)&&0<u.length)){e.next=12;break}return e.next=10,a(i.routerRedux.replace("/all"));case 10:e.next=14;break;case 12:return e.next=14,a(i.routerRedux.replace("/user/watching"));case 14:case"end":return e.stop()}},e,this)}),loginFaild:o.a.mark(function e(t,n){var r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.payload,r=n.put,n.call,e.next=4,r({type:"save",payload:{userInfo:null}});case 4:return e.next=6,r(i.routerRedux.replace("/login"));case 6:case"end":return e.stop()}},e,this)}),updateDB:o.a.mark(function e(t,n){var r,a,u,s,c,i,p,l;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,a=n.put,u=n.call,n.select,e.next=4,a({type:"save",payload:{percent:0,status:"active"}});case 4:return e.next=6,u(g.a.checkUser,r);case 6:return e.next=8,u(g.a.getUpdateTime);case 8:if(s=e.sent,!(36e5<(new Date).getTime()-s)){e.next=24;break}return e.next=12,u(g.a.getRepos,r);case 12:c=e.sent,i=0,p=c.length;case 14:if(!(i<p)){e.next=22;break}return e.next=17,u(g.a.syncRepoInfo,c[i]);case 17:return e.next=19,a({type:"save",payload:{percent:Math.floor(100*i/p)}});case 19:i+=1,e.next=14;break;case 22:return e.next=24,u(g.a.setUpdateTime);case 24:return e.next=26,u(g.a.getRepos,r);case 26:return l=e.sent,e.next=29,a({type:"save",payload:{percent:100,status:"success",repos:l}});case 29:return e.abrupt("return",l);case 30:case"end":return e.stop()}},e,this)}),subscribe:o.a.mark(function e(t,n){var r,u,s,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,u=n.put,s=n.call,e.next=4,s(g.a.addRepo,r);case 4:if(c=e.sent,!c.data){e.next=13;break}return e.next=9,u({type:"updateRepos"});case 9:return a.a.success({message:"\u8ba2\u9605\u6210\u529f",description:""}),e.abrupt("return",!0);case 13:return a.a.error({message:"\u8ba2\u9605\u5931\u8d25",description:""}),e.abrupt("return",!1);case 15:case"end":return e.stop()}},e,this)}),unsubscribe:o.a.mark(function e(t,n){var r,u,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,u=n.put,s=n.call,e.next=4,s(g.a.delRepo,r);case 4:return e.next=6,u({type:"updateRepos"});case 6:return a.a.success({message:"\u9000\u8ba2\u6210\u529f",description:""}),e.abrupt("return",!0);case 8:case"end":return e.stop()}},e,this)}),updateRepos:o.a.mark(function e(t,n){var r,a,u,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.payload,a=n.put,u=n.call,e.next=4,u(g.a.getRepos,r);case 4:return s=e.sent,e.next=7,a({type:"save",payload:{repos:s}});case 7:case"end":return e.stop()}},e,this)})},reducers:{save:function(e,t){return Object(s.a)({},e,t.payload)}}}},63:function(e,t,n){"use strict";var r=n(3),a=n.n(r),u=n(11),s=n(17),c=n.n(s);t.a={get:function(){var e=Object(u.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.getItem("accessToken");case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),set:function(e){return c.a.setItem("accessToken",e)},remove:function(){return c.a.removeItem("accessToken")}}},80:function(e,t,n){e.exports={italic:"index_italic__2F29j",ellipsis:"index_ellipsis__4wQGa",ponter:"index_ponter__ixEJa",flex:"index_flex__3mZIF",loading:"index_loading__vMJL6",text:"index_text__2g5nv",percent:"index_percent__372j5"}}},[[263,18,17]]]);
//# sourceMappingURL=main.fdfa2ce9.chunk.js.map