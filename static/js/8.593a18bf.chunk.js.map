{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","models/favorites.js"],"names":["_toConsumableArray","arr","Array","isArray","i","arr2","length","_arrayWithoutHoles","iter","Symbol","iterator","Object","prototype","toString","call","from","_iterableToArray","TypeError","_nonIterableSpread","__webpack_require__","d","__webpack_exports__","namespace","state","list","loading","total","undefined","page","pageSize","subscriptions","setup","_ref","dispatch","history","listen","_ref2","pathname","search","type","payload","effects","load","D_github_issue_reader_dva_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default","a","mark","_ref3","_ref4","put","select","parsed","_ref5","_ref6","data","wrap","_context","prev","next","queryString","parse","parseInt","favorites","sent","abrupt","localForageService","getFavoriteIssues","stop","this","updateIssue","_ref7","_ref8","_ref9","index","issues","_context2","findIndex","it","owner","repo","number","D_github_issue_reader_dva_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__","D_github_issue_reader_dva_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","reducers","save","action"],"mappings":"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","file":"static/js/8.593a18bf.chunk.js","sourcesContent":["import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}","export default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}","export default function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}","// import React from 'react';\r\n// import { routerRedux } from 'dva/router';\r\n// import queryString from 'query-string';\r\n// import { notification } from 'antd';\r\nimport queryString from 'query-string';\r\nimport localForageService from '../services/localForage';\r\n// import userServices from '../services/user';\r\n\r\n\r\nexport default {\r\n\r\n  namespace: 'favorites',\r\n\r\n  state: {\r\n    list: [],\r\n    loading: false,\r\n    total: undefined,\r\n    page: 1,\r\n    pageSize: 20,\r\n  },\r\n\r\n  subscriptions: {\r\n    setup({ dispatch, history }) {\r\n      return history.listen(({ pathname, search }) => {\r\n        if ('/favorites' === pathname) {\r\n          return dispatch({ type: 'load', payload: { search } });\r\n        }\r\n      });\r\n    },\r\n  },\r\n\r\n  effects: {\r\n    *load({ payload }, { call, put, select }) {\r\n      const parsed = queryString.parse(payload.search);\r\n      const page = parseInt(parsed.page || 1, 10);\r\n      const { pageSize, loading } = yield select(state => state.favorites);\r\n      if (loading) {\r\n        return;\r\n      }\r\n      yield put({ type: 'save', payload: { list: [], loading: true, page } });\r\n      const { data } = yield call(localForageService.getFavoriteIssues, (page - 1) * pageSize, pageSize);\r\n      yield put({ type: 'save', payload: { loading: false, list: (data && data.list) || null, total: data && data.total } });\r\n    },\r\n    *updateIssue({ payload }, { put, call, select }) {  // eslint-disable-line\r\n      yield call(localForageService.updateIssue, payload);\r\n      const { list } = yield select(state => state.favorites);\r\n      const index = list.findIndex(it => it.owner === payload.owner && it.repo === payload.repo && it.number === payload.number);\r\n      if (-1 !== index) {\r\n        const issues = [...list];\r\n        issues[index] = { ...issues[index], ...payload };\r\n        yield put({ type: 'save', payload: { list: issues } });\r\n      }\r\n    },\r\n  },\r\n\r\n  reducers: {\r\n    save(state, action) {\r\n      return { ...state, ...action.payload };\r\n    },\r\n  },\r\n\r\n};\r\n"],"sourceRoot":""}