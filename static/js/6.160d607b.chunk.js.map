{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","models/all.js"],"names":["_toConsumableArray","arr","Array","isArray","i","arr2","length","_arrayWithoutHoles","iter","Symbol","iterator","Object","prototype","toString","call","from","_iterableToArray","TypeError","_nonIterableSpread","__webpack_require__","d","__webpack_exports__","namespace","state","list","loading","total","undefined","page","pageSize","subscriptions","setup","_ref","dispatch","history","listen","_ref2","pathname","search","type","payload","effects","load","D_github_issue_reader_dva_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default","a","mark","_ref3","_ref4","put","select","parsed","_ref5","_ref6","data","wrap","_context","prev","next","queryString","parse","parseInt","all","sent","abrupt","localForageService","getIssues","stop","this","subscribe","_ref7","_ref8","result","_context2","resolve","D_github_issue_reader_dva_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","watch","unsubscribe","_ref9","_ref10","_context3","update","_ref11","_ref12","_ref13","index","newList","_context4","watching","findIndex","it","owner","repo","D_github_issue_reader_dva_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","updateIssue","_ref14","_ref15","_ref16","issues","_context5","number","reducers","save","action"],"mappings":"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","file":"static/js/6.160d607b.chunk.js","sourcesContent":["import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}","export default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}","export default function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}","// import React from 'react';\r\n// import { routerRedux } from 'dva/router';\r\n// import queryString from 'query-string';\r\n// import { notification } from 'antd';\r\nimport queryString from 'query-string';\r\nimport localForageService from '../services/localForage';\r\n// import userServices from '../services/user';\r\n\r\n\r\nexport default {\r\n\r\n  namespace: 'all',\r\n\r\n  state: {\r\n    list: [],\r\n    loading: false,\r\n    total: undefined,\r\n    page: 1,\r\n    pageSize: 20,\r\n  },\r\n\r\n  subscriptions: {\r\n    setup({ dispatch, history }) {\r\n      return history.listen(({ pathname, search }) => {\r\n        if ('/all' === pathname) {\r\n          return dispatch({ type: 'load', payload: { search } });\r\n        }\r\n      });\r\n    },\r\n  },\r\n\r\n  effects: {\r\n    *load({ payload }, { call, put, select }) {\r\n      const parsed = queryString.parse(payload.search);\r\n      const page = parseInt(parsed.page || 1, 10);\r\n      const { pageSize, loading } = yield select(state => state.all);\r\n      if (loading) {\r\n        return;\r\n      }\r\n      yield put({ type: 'save', payload: { list: [], loading: true, page } });\r\n      const { data } = yield call(localForageService.getIssues, (page - 1) * pageSize, pageSize);\r\n      yield put({ type: 'save', payload: { loading: false, list: (data && data.list) || null, total: data && data.total } });\r\n    },\r\n    // *getOwners({ payload }, { put, call }) {},\r\n    *subscribe({ payload }, { put, call }) {\r\n      if (payload.loading) {\r\n        return;\r\n      }\r\n      yield put.resolve({ type: 'update', payload: { ...payload, loading: true } });\r\n      const result = yield put.resolve({ type: 'app/subscribe', payload });\r\n      yield put.resolve({ type: 'update', payload: { ...payload, loading: false, watch: result } });\r\n    },\r\n    *unsubscribe({ payload }, { put, call }) {\r\n      if (payload.loading) {\r\n        return;\r\n      }\r\n      yield put.resolve({ type: 'update', payload: { ...payload, loading: true } });\r\n      const result = yield put.resolve({ type: 'app/unsubscribe', payload });\r\n      yield put.resolve({ type: 'update', payload: { ...payload, loading: false, watch: !result } });\r\n    },\r\n    *update({ payload }, { put, select }) {\r\n      const { list } = yield select(state => state.watching);\r\n      if (!list) {\r\n        return;\r\n      }\r\n      const index = list.findIndex(it => (payload.owner === it.owner && payload.repo === it.repo));\r\n      if (-1 === index) {\r\n        return;\r\n      }\r\n      const newList = [...list];\r\n      newList[index] = { ...newList[index], ...payload };\r\n      yield put({ type: 'save', payload: { list: newList } });\r\n    },\r\n    *updateIssue({ payload }, { put, call, select }) {  // eslint-disable-line\r\n      yield call(localForageService.updateIssue, payload);\r\n      const { list } = yield select(state => state.all);\r\n      const index = list.findIndex(it => it.owner === payload.owner && it.repo === payload.repo && it.number === payload.number);\r\n      if (-1 !== index) {\r\n        const issues = [...list];\r\n        issues[index] = { ...issues[index], ...payload };\r\n        yield put({ type: 'save', payload: { list: issues } });\r\n      }\r\n    },\r\n  },\r\n\r\n  reducers: {\r\n    save(state, action) {\r\n      return { ...state, ...action.payload };\r\n    },\r\n  },\r\n\r\n};\r\n"],"sourceRoot":""}