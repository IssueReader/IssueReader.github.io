{"version":3,"sources":["routes/Watching/index.module.less","routes/Watching/index.js"],"names":["module","exports","italic","ellipsis","ponter","container","Watching","props","_this","Object","D_github_issue_reader_dva_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_10__","this","D_github_issue_reader_dva_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_12__","D_github_issue_reader_dva_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_13__","call","load","bind","D_github_issue_reader_dva_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_15__","subscribe","unsubscribe","dispatch","type","e","record","loading","payload","owner","repo","_this2","react__WEBPACK_IMPORTED_MODULE_16___default","a","createElement","Fragment","ant_design_pro_lib_PageHeader__WEBPACK_IMPORTED_MODULE_18___default","title","action","antd_lib_button__WEBPACK_IMPORTED_MODULE_7___default","onClick","disabled","breadcrumbList","className","styles","antd_lib_card__WEBPACK_IMPORTED_MODULE_1___default","bordered","antd_lib_table__WEBPACK_IMPORTED_MODULE_3___default","columns","key","render","text","antd_lib_avatar__WEBPACK_IMPORTED_MODULE_5___default","src","avatarUrl","dataIndex","watch","dataSource","list","pagination","rowKey","concat","React","PureComponent","connect","state","watching"],"mappings":"8EACAA,EAAAC,QAAA,CAAkBC,OAAA,sBAAAC,SAAA,wBAAAC,OAAA,sBAAAC,UAAA,qTCQZC,cACJ,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IACjBE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KAIDQ,KAAOP,EAAKO,KAAKC,KAAVP,OAAAQ,EAAA,EAAAR,QAAAQ,EAAA,EAAAR,CAAAD,KACZA,EAAKU,UAAYV,EAAKU,UAAUF,KAAfP,OAAAQ,EAAA,EAAAR,QAAAQ,EAAA,EAAAR,CAAAD,KACjBA,EAAKW,YAAcX,EAAKW,YAAYH,KAAjBP,OAAAQ,EAAA,EAAAR,QAAAQ,EAAA,EAAAR,CAAAD,KAPFA,sEAUjBG,KAAKJ,MAAMa,SAAS,CAAEC,KAAM,4FAEdC,EAAGC,uEACbA,EAAOC,yEAGLb,KAAKJ,MAAMa,SAAS,CAAEC,KAAM,qBAAsBI,QAAS,CAAEC,MAAOH,EAAOG,MAAOC,KAAMJ,EAAOI,yLAErFL,EAAGC,uEACfA,EAAOC,yEAGLb,KAAKJ,MAAMa,SAAS,CAAEC,KAAM,uBAAwBI,QAAS,CAAEC,MAAOH,EAAOG,MAAOC,KAAMJ,EAAOI,8IAGhG,IAAAC,EAAAjB,KAEP,OACEkB,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,KACEH,EAAAC,EAAAC,cAACE,EAAAH,EAAD,CACEI,MAAM,+CACNC,OAAQN,EAAAC,EAAAC,cAAAK,EAAAN,EAAA,CAAQT,KAAK,UAAUgB,QAAS1B,KAAKI,KAAMuB,SAAU3B,KAAKJ,MAAMiB,SAAhE,gBACRe,eAAgB,CAAC,CAAEL,MAAO,SAE5BL,EAAAC,EAAAC,cAAA,OAAKS,UAAWC,IAAOpC,WACrBwB,EAAAC,EAAAC,cAAAW,EAAAZ,EAAA,CAAMa,UAAU,GACdd,EAAAC,EAAAC,cAAAa,EAAAd,EAAA,CACEe,QAAS,CAAC,CACRX,MAAO,eACPY,IAAK,QACLC,OAAQ,SAACC,EAAMzB,GAAP,OACNM,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAAkB,EAAAnB,EAAA,CAAQoB,IAAK3B,EAAO4B,YADtB,WAEe5B,EAAOG,SAGvB,CACDQ,MAAO,sBACPkB,UAAW,OACXN,IAAK,QACJ,CACDZ,MAAO,qBACPkB,UAAW,aACXN,IAAK,cACJ,CACDZ,MAAO,oBACPkB,UAAW,YACXN,IAAK,aACJ,CACDZ,MAAO,2BACPkB,UAAW,aACXN,IAAK,cACJ,CACDZ,MAAO,eACPY,IAAK,SACLC,OAAQ,SAACC,EAAMzB,GAAP,OACNA,EAAO8B,MACLxB,EAAAC,EAAAC,cAAAK,EAAAN,EAAA,CAAQN,QAASD,EAAOC,QAASa,QAAS,SAAAf,GAAC,OAAIM,EAAKT,YAAYG,EAAGC,KAAnE,gBACAM,EAAAC,EAAAC,cAAAK,EAAAN,EAAA,CAAQT,KAAK,UAAUG,QAASD,EAAOC,QAASa,QAAS,SAAAf,GAAC,OAAIM,EAAKV,UAAUI,EAAGC,KAAhF,mBAGN+B,WAAY3C,KAAKJ,MAAMgD,KACvB/B,QAASb,KAAKJ,MAAMiB,QACpBgC,YAAY,EACZC,OAAQ,SAAAlC,GAAM,SAAAmC,OAAOnC,EAAOG,MAAd,KAAAgC,OAAuBnC,EAAOI,mBA3EnCgC,IAAMC,eAyFdC,4BAAQ,SAAAC,GAAK,MAAK,CAE/BP,KAAMO,EAAMC,SAASR,KACrB/B,QAASsC,EAAMC,SAASvC,UAHXqC,CAIXvD","file":"static/js/15.33b31304.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"italic\":\"index_italic__2GPvS\",\"ellipsis\":\"index_ellipsis__2G6vs\",\"ponter\":\"index_ponter__3YBwY\",\"container\":\"index_container__uOXPJ\"};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'dva';\r\nimport { Table, Button, Card, Avatar } from 'antd';\r\nimport PageHeader from 'ant-design-pro/lib/PageHeader';\r\n// import userServices from '../../services/user';\r\nimport styles from './index.module.less';\r\n\r\n\r\nclass Watching extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    // this.state = {\r\n    //   list: undefined,\r\n    // };\r\n    this.load = this.load.bind(this);\r\n    this.subscribe = this.subscribe.bind(this);\r\n    this.unsubscribe = this.unsubscribe.bind(this);\r\n  }\r\n  load() {\r\n    this.props.dispatch({ type: 'watching/load' });\r\n  }\r\n  async subscribe(e, record) {\r\n    if (record.loading) {\r\n      return;\r\n    }\r\n    await this.props.dispatch({ type: 'watching/subscribe', payload: { owner: record.owner, repo: record.repo } });\r\n  }\r\n  async unsubscribe(e, record) {\r\n    if (record.loading) {\r\n      return;\r\n    }\r\n    await this.props.dispatch({ type: 'watching/unsubscribe', payload: { owner: record.owner, repo: record.repo } });\r\n    // this.update(record, { loading: false, watch: !result });\r\n  }\r\n  render() {\r\n    // const columns = this.getColumns();\r\n    return (\r\n      <React.Fragment>\r\n        <PageHeader\r\n          title=\"我的 Github 关注列表\"\r\n          action={<Button type=\"primary\" onClick={this.load} disabled={this.props.loading}>刷新</Button>}\r\n          breadcrumbList={[{ title: null }]}\r\n        />\r\n        <div className={styles.container}>\r\n          <Card bordered={false}>\r\n            <Table\r\n              columns={[{\r\n                title: '博主',\r\n                key: 'owner',\r\n                render: (text, record) => (\r\n                  <span>\r\n                    <Avatar src={record.avatarUrl} />\r\n                    &nbsp;&nbsp;{record.owner}\r\n                  </span>\r\n                ),\r\n              }, {\r\n                title: 'Github 仓库',\r\n                dataIndex: 'repo',\r\n                key: 'repo',\r\n              }, {\r\n                title: '文章数',\r\n                dataIndex: 'issueCount',\r\n                key: 'issueCount',\r\n              }, {\r\n                title: 'star 人数',\r\n                dataIndex: 'starCount',\r\n                key: 'starCount',\r\n              }, {\r\n                title: '订阅人数',\r\n                dataIndex: 'watchCount',\r\n                key: 'watchCount',\r\n              }, {\r\n                title: '操作',\r\n                key: 'action',\r\n                render: (text, record) => (\r\n                  record.watch ?\r\n                    <Button loading={record.loading} onClick={e => this.unsubscribe(e, record)}>退订</Button> :\r\n                    <Button type=\"primary\" loading={record.loading} onClick={e => this.subscribe(e, record)}>订阅</Button>\r\n                ),\r\n              }]}\r\n              dataSource={this.props.list}\r\n              loading={this.props.loading}\r\n              pagination={false}\r\n              rowKey={record => `${record.owner}/${record.repo}`}\r\n            />\r\n          </Card>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nWatching.propTypes = {\r\n  // repos: PropTypes.array,\r\n  dispatch: PropTypes.func,\r\n};\r\n\r\nexport default connect(state => ({\r\n  // repos: state.app.repos,\r\n  list: state.watching.list,\r\n  loading: state.watching.loading,\r\n}))(Watching);\r\n"],"sourceRoot":""}